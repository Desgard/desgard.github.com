---
layout: post
title: "Glow Glowed In Shanghai"
date: 2016-05-04 01:01:00
image: '/assets/img/'
description: 'A Glow Tour...'
tags:
- life
categories:
- Programming Road
twitter_text: 'Put your twitter description here.'
---

![](/assets/img/post_img/Glow.png)

在经历过鹅厂、网易、阿里、扇贝的信任危机之后，已经转换了目标。在刷求职信息的时候，偶然间认识到了这么一家很洋气的创业公司`Glow`。

在认识过他们强大的技术团队，看过他们技术博客以及上线的app产品后，让我确信这是一家以技术为主导的强大潜力股公司。于是，没有犹豫的投了实习生的简历。在一轮40分钟的技术面之后（觉得主要考核的就是所选方向的基础，考核了我许多`ObjC的内存管理基础知识`、`ObjC语法基础知识`等等），收到了hr的现场面试的邀请，于是预约在五一节后，来上海进行一次现场面试。

来到`Glow`的工作地，感觉就是一个很开放、很自由的环境，打内心感觉这个团队充满活力，增加了好感程度吧。在来面试之前，看到了`Glow`公司的地段，上海南京路旁、人民公园附近...说实话，自己有点目瞪口呆。在如此的环境，就应该会有如此的团队吧~

现场面试，在HR Sophia请我稍等之后，一面面试官走进了会议室。“我们以前通过电话的~”，我得知了他就是电面时的考官Allen（说实话，长得有点像秋日...），在稍作职务介绍后，就给我出了面试的第一道题目。

> 已知有一个可以产生[0, 5]范围内的函数`rand5()`，让我在不调用其他函数的基础上写一个`rand7()`函数用来产生[0, 7]范围的正整数。

这个题目我在很久以前看过相关的题目，其关键主要是抓住产生随机数的概率相同。我们可以基于`rand5()`来构造一个更大范围的随机函数，再将这个范围的数目向目标范围进行分组即可。如果分组后，在极大值边界有多余出的无法分组的区域，舍去即可。因为我们要保证在可选区域内，对于[0, 7]目标范围内的投影数目相同，即保证随机数出现概率相同。

针对这道题来说，我们可以先用多进制的思路来生成大范围数。通过表达式`rand5() * 6 + rand5()`可以随机产生一个二位六进制数，范围是[0, 35]。然后我们对其中的每8个数的区域进行划分，最后发现[32, 33, 34, 35]四个数是剩余数，那重新调用一次表达式产生随机数，直到产生[0, 31]范围的数再进行投影就好了。

于是我写出了以下代码：

{% highlight ruby %}
#include <iostream>
#include <algorithm>
#include <cmath>
#include <cstdlib>
#include <map>
using namespace std;

map<int, int> Map;

int rand5() {
    return rand() % 6;
}

int rand7() {
    int _2num = rand5() + rand5() * 6;
    if (_2num < 32) {
        return _2num % 8;
    } else {
        return rand7();
    }
}

int main () {
    srand((unsigned)time(0));
    for (int i = 0; i < 100000; ++ i) {
        Map[rand7()] ++;
    }
    
    // 近似等效成一个检测概率的东西
    // 通过随机数在1e5次产生中各个数目出现的次数来判断
    map<int, int> :: iterator it = Map.begin();
    for (; it != Map.end(); ++ it) {
        cout << it -> second << endl;
    }
    return 0;
}

{% endhighlight %}

这道结束后，Allen与我又闲聊了一会，在展示完最近做的跑步app后，他看到了我使用`PNChart`折线图。于是他问我要是我来做会怎么做。因为这个东西我自己没有做过，我只简单地说了一下自己的想法。之后他从中解题发挥，又给我出了一道数学题：

> 已知一个坐标点的集合，并且已经按照横坐标排列。因为相邻坐标点不是以坐标轴最小单位连续的，而是几个关键点（用来绘制折线图）。如果我选出横轴上任意的一个位置，如何将这个点的在折线上的纵坐标查出？

由于横坐标是有顺序的，所以我对横坐标做一个二分，逐渐缩小距离即可。

可能由于时间原因，Allen没有叫我写代码，听过我的思路之后，一面就算结束了。虽然对于折线图的问题，自己并不是很熟悉，但是总得来说对自己的一面还是很满意的。主要是觉得那道产生随机数的题目，自己做的比较快吧。简单休息之后，迎来了二面的面试官。

二面面试官没有做自我介绍（自己也很后悔没有问面试官如何称呼，因为我觉得从他身上能学到很多思考问题的方法），在简单的看了看简历之后，直接问起了问题。

> 在一个统计投票的空间中，当我对某一个选项vote之后，会出现每一个选项的票数统计所占百分比。但是很多时候，这个百分比由于是四舍五入保留一位小数，所以在相加之后无法得到100%。希望我做一个策略，来使得票数所占比例尽可能的相加等于100%。

之后，面试官还为我补充了以下3个约定。

1. 如果总共有三个选项，且三个选项的得票数相等（33.3%）。即使是最后相加后无法达到100%，在这样情况下我们也是可以接受的；
2. 若票数`A1 = A2`，那么它的所占百分比`P1 = P2`；
3. 若票数`A1 > A2`，那么它的所占百分比`P1 ≥ P2`。

在尝试这道题的时候，我的切入点是错误的。我尝试着说了很多方案的时候，都被面试官的反例给驳回。最后在面试官引导下，我得到了这么一种方案：**在最大值和最小值有明确差距的时候，若在四舍五入之后，所有的百分比之和若小于100%，我们可以将剩余权重直接投入到最大值上。若有多个最大值，可以平均投入到多个最大值上。**我在这题上耽误的时间太多，最后面试官只让我写了下方案的代码便结束了二面。

在二面结束后，因为自己有些懵逼，又在A4纸上重新整理的这道题的很多细节和思路。这道题自己从开始的入手方向和考虑时候的细节问题做的确实都很差，我对自己的表现也是很不满意的。买没将所有的分类列完，三面面试官走过来，跟我说到饭店了，请我吃顿午饭，有些受宠若惊。三面面试官介绍说是首席技术官，想多了解下我的情况。吃饭的时候和三面面试官聊了很多关于移动开发趋势，还有自己的大学经历之类的。然后就正式开始了三面，直接出了一道算法题。

> 给出一个无序数组，查询其中的第K大数是多少。

做题要循序渐进，首先能想到的肯定是先排序，再求第K大数。复杂度O(nlogn)。但是面试官说还有更简单的办法，我提供了一个思路，很像基数排序的思路，直接按照顺序记录数字个数，但是单个数字的范围如果过大，就无法使用该方法。之前，我记得看过有用归并法求解第K大数，由于对归并不熟悉，于是我使用了快排来解答这个第K大数的问题。代码如下：

{% highlight ruby %}
#include <iostream>
#include <numeric>
#include <algorithm>
#include <cstdlib>
#include <vector>
using namespace std;

int query_k_max (int a[], int l, int r, int k) {
    if (l < r) {
        int i = l, j = r;
        int x = a[l];
        while (i < j) {
            while (i < j && x < a[j]) j --;
            if (i < j) a[i ++] = a[j];
            while (i < j && x > a[i]) i ++;
            if (i < j) a[j --] = a[i];
        }
        a[i] = x;
        if (i == k - 1) return a[i];
        else {
            if (i > k - 1) return query_k_max(a, l, i, k);
            else return query_k_max(a, i + 1, r, k);
        }
    }
}


int main () {
    int a[5] = {5, 3, 7, 1, 4};
    cout << query_k_max(a, 0, 4, 3) << endl;
    return 0;
}

{% endhighlight %}

在写完代码后，面试官让我估算了下复杂度，用数学推导可以推出平均复杂度为O(n)。

在完成完平局复杂度，三面面试官说今天的面试就结束了，让我回去等通知。次日在火车上，收到了Sophia的电话，说我的表现听不错，也是他们想要招聘的人，在确定实习时间后，向她联系即可。

这次的上海`Glow`行让我的收获很大，也很开心的度过了几天上海之旅。在回成都的动车上写完此文，最后附上外滩东方明珠的夜景图。

![](/assets/img/post_img/2016-05-04-img1.JPG)
